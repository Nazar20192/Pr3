import sympy as sp

def bisection_method():
try:
expr_input = input("Введіть функцію (наприклад, x**3 - x - 3): ")
x = sp.symbols('x')
expr = sp.sympify(expr_input)
f = sp.lambdify(x, expr, "math")
except:
print("Помилка: введено некоректний математичний вираз.")
return

try:
    a = float(input("Введіть початок відрізка a: "))
    b = float(input("Введіть кінець відрізка b: "))
    tol = float(input("Введіть точність (наприклад, 0.001): "))
except ValueError:
    print("Помилка: межі та точність мають бути числами.")
    return

fa = f(a)
fb = f(b)

if fa * fb >= 0:
    print("Помилка: функція не змінює знак на цьому відрізку.")
    return

step = 0
while (b - a) / 2 > tol:
    step += 1
    c = (a + b) / 2
    fc = f(c)

    print("Крок", step, "Відрізок:", round(a, 4), "-", round(b, 4), "Середина:", round(c, 4))

    if fc == 0:
        break

    if fa * fc < 0:
        b = c
        fb = fc
    else:
        a = c
        fa = fc

root = (a + b) / 2
print("\nНаближений корінь:", round(root, 6))


if name == "main":
bisection_method()
